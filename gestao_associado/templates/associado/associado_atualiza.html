{% extends 'base.html' %}
{% block conteudo %}
<h2 class="pt-3 text-center">Atualização de Associado</h2>
<hr>

{% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="alert text-center alert-danger" role="alert">
        {% for msg in messages %}
            <h4> {{ msg }} </h4>    
        {% endfor %}
    </div>
    {% endif %}
{% endwith %}

<div>
    {% for associado in _query_associados %}
    <form action="{{url_for('page_associado_atualiza', id = associado.id)}}" method='POST' class="form-control p-5" >

        <div class="mb-3 form-check form-switch">
            {% if associado.status_associado %}
                <input class="form-check-input" name="status_associado" type="checkbox" role="switch" checked id="flexSwitchCheckDefault" value="{{associado.status_associado}}">
                <label class="form-check-label" name="" for="flexSwitchCheckDefault"><b>Habilitado</b></label>
            {% else %}
                <input class="form-check-input" name="status_associado" type="checkbox" role="switch" id="flexSwitchCheckDefault" value="{{not(associado.status_associado)}}">
                <label class="form-check-label" name="" for="flexSwitchCheckDefault">Desabilitado</label>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="">Data atualização:</label>
            <input type="date" class="p-2 form-control" name="data_atualizada" placeholder="x" value="{{associado.data_atualizada}}" readonly>
        </div>
        <div class="mb-3">
            <label for="">Data de cadastro:</label>
            <input type="date" class="p-2 form-control" name="data_cadastro" placeholder="Data de cadastro" value="{{associado.data_cadastro}}" readonly>
        </div>
        <div class="mb-3">
            <label for="">CPF:</label>
            <input type="text" id="cpf" class="p-2 form-control" name="cpf" placeholder="000.000.000-00" value="{{associado.cpf}}">
        </div>
        <div class="mb-3">
            <label for="">Nome Completo:</label>
            <input type="text" class="p-2 form-control" name="nome_completo" placeholder="Nome completo" value="{{associado.nome_completo}}" required>
        </div>
        <div class="mb-3">
            <label for="">E-mail:</label>
            <input type="email" class="p-2 form-control" name="email" placeholder="E-mail" value="{{associado.email}}" required>
        </div>
        <div class="mb-3">
            <label for="">Data de nascimento:</label>
            <input type="date" class="p-2 form-control" name="data_nascimento" placeholder="Data de nascimento" value="{{associado.data_nascimento}}" required>
        </div>
        <div class="mb-3">
            <label for="">Endereço completo:</label>
            <input type="text" class="p-2 form-control" name="endereco" placeholder="" value="{{associado.endereco}}" required>
        </div>
        <div class="row g-4 mb-3">
            <div class="col-auto">
                <label for="">UF:</label>
                <select name="uf" class="form-select" required>
                    <!-- <option selected></option> -->
                    {% for lista_uf in unidade_federativa %}
                        {% if associado.uf == lista_uf %}
                            <option selected value="{{lista_uf}}">{{lista_uf}}</option>
                        {% else %}
                            <option value="{{lista_uf}}">{{lista_uf}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
            <div class="col-8">
                <label for="">Cidade:</label>
                <select name="cidade" class="form-select" required>
                    <option selected></option>
                    {% for cities_pr in cidades_pr %}
                        {% if associado.cidade == cities_pr %}
                            <option selected data-uf="PR" value="{{city_pr}}">{{city_pr}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="mb-3">
            <label for="">Telefone/Celular:</label>
            <input type="text" id="telefone" class="p-2 form-control" name="telefone" placeholder="telefone" value="{{associado.telefone}}" required>
        </div>

        <div class="mb-3">
            <label for="">Estado Civil:</label>
            <select name="estado_civil" class="form-select">
                {% for lista in estado_civil %}
                    {% if associado.estado_civil == lista.tipo %}
                        <option selected value="{{lista.tipo}}">{{lista.tipo}}</option>
                    {% else %}
                        <option value="{{lista.tipo}}">{{lista.tipo}}</option>
                    {% endif %}
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="">Como você se identifica?</label>
            <select name="como_identifica" class="form-select">
                {% for lista in identificacao %}
                    {% if associado.como_identifica == lista.tipo %}
                        <option selected value="{{lista.tipo}}">{{lista.tipo}}</option>
                    {% else %}
                        <option value="{{lista.tipo}}">{{lista.tipo}}</option>
                    {% endif %}
                {% endfor %}
            </select>
        </div>
        
        <div class="mb-3">
            <label for="">Situação de trabalho:</label>
            <input type="text" class="p-2 form-control" name="situacao_trabalho" value="{{associado.situacao_trabalho}}" required>
        </div>

        <div class="mb-3">
            <label for="">Tipo sanguíneo:</label>
            <select name="tipo_sanguineo" class="form-select">
                <option selected></option>
                {% for lista_sanguineos in tipos_sanguineos %}
                    {% if associado.tipo_sanguineo == lista_sanguineos.tipos %}
                        <option selected value="{{lista_sanguineos.tipos}}">{{lista_sanguineos.tipos}}</option>
                    {% else %}
                        <option value="{{lista_sanguineos.tipos}}">{{lista_sanguineos.tipos}}</option>
                    {% endif %}
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="">Quantidade de filhos: </label>
            <input type="number" class="p-2 form-control" name="quantidades_filhos" value="{{associado.quantidades_filhos}}" placeholder="" required>
        </div>
        
        <div class="mb-3">
            <button class="btn btn-success">Atualizar</button>
        </div>
    </form>
    {% endfor %}
</div>

{% endblock conteudo %}
    
    